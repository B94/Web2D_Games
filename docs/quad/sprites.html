<!doctype html><!--
[license]
[/license]
--><html>
<head>
	<meta charset='utf-8'>
	<link rel='stylesheet' href='style.css'>
</head>
<body>
	<img id='imgbg' src='bg.png'>
	<div id='topbar'>
		<input id='upload' type='file' multiple>
		<select id='anim_list'>
			<option value='-1'>Animation</option>
		</select>
		<button id='save_png'>Save PNG</button>
	</div>
	<div id='lowbar'>
		<button id='zoom_add'>+</button>
		<button id='zoom_btn'>ZOOM</button>
		<button id='zoom_sub'>-</button>

		<button id='prev_btn'>&lt;</button>
		<button id='play_btn'>PLAY</button>
		<button id='next_btn'>&gt;</button>
	</div>
	<canvas id='canvas'></canvas>

	<script src='quad.js'></script>
	<script>
	var dom_animlist = document.getElementById('anim_list');
	var dom_canvas   = document.getElementById('canvas');
	var dom_upload   = document.getElementById('upload');
	QUAD.init_webgl(dom_canvas);

	dom_upload.addEventListener("change", function(e){
		QUAD.file_reader(dom_upload.files, dom_animlist);
		console.log(e);
		console.log(QUAD);
	});
	dom_animlist.addEventListener("change", function(e){
		QUAD.anim_set(dom_animlist.value);
		console.log(e);
		console.log(QUAD);
	});
	document.getElementById('save_png').addEventListener("click", function(e){
		//QUAD.save_png(QUAD.webgl.gl.canvas);
		QUAD.save_png(dom_canvas);
		console.log(e);
		console.log(QUAD);
	});
	document.getElementById('zoom_btn').addEventListener("click", function(e){
		QUAD.anim.zoom = 1.0;
	});
	document.getElementById('zoom_add').addEventListener("click", function(e){
		// canvas become smaller = sprite become bigger
		QUAD.anim.zoom -= 0.1;
		if ( QUAD.anim.zoom < 0.1 )
			QUAD.anim.zoom = 0.1;
	});
	document.getElementById('zoom_sub').addEventListener("click", function(e){
		// canvas become bigger = sprite become smaller
		QUAD.anim.zoom += 0.1;
		if ( QUAD.anim.zoom > 10.0 )
			QUAD.anim.zoom = 10.0;
	});
	document.getElementById('prev_btn').addEventListener("click", function(e){
		console.log(e);
		console.log(QUAD);
	});
	document.getElementById('next_btn').addEventListener("click", function(e){
		console.log(e);
		console.log(QUAD);
	});
	document.getElementById('play_btn').addEventListener("click", function(e){
		dom_animlist.value = -1;
		console.log(e);
		console.log(QUAD);
	});

	setInterval(function(){
		if ( QUAD.files.quad === undefined )
			return;
		if ( QUAD.files.quad.prefix === '' )
			return;
		QUAD.render_frame();
	}, 250);
	</script>
</body>
</html>
<!--
		gp_quad
			.anim_set()
			.frame_render();
		gp_quad
			.frame_prev()
			.frame_render();
		gp_quad
			.frame_next()
			.frame_render();
-->
